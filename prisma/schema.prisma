generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id             String   @id @default(uuid())
  phone          String   @unique
  name           String?  
  email          String?  
  gender         String?  
  dob            String?  
  referralCode   String   @unique
  referredByCode String?  
  referralName   String?  
  referralCount  Int      @default(0)
  referredUsers  String[] @default([])
  addresses      Json     @default("[]")
  dietaryPref    String?  
  sector         String?  
  orders         Order[]  @relation("UserOrders")
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}

model Order {
  id                String   @id @default(uuid())
  userId            String
  user              User     @relation(fields: [userId], references: [id], name: "UserOrders")
  items             Json
  status            String   @default("pending")
  deliveryDate      String?  
  deliverySlot      Json?    
  deliveryAddress   Json?    
  paymentMethod     Json?    
  subtotal          Float?   
  deliveryFee       Float?   
  tax               Float?   
  total             Float?   
  specialInstructions String?
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
}
